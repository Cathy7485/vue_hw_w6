import{_ as g,o as r,c,d as t,F as u,f as p,g as m,t as l,b as I,h as b,v as f}from"./index.281c0acc.js";const{VITE_APP_URL:i,VITE_APP_PATH:h}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"kc777",BASE_URL:"/vue_hw_w6/",MODE:"production",DEV:!1,PROD:!0},v={data(){return{products:[],productId:"",cart:{},loadingItem:"",data:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCarts(){this.$http.get(`${i}/v2/api/${h}/cart`).then(e=>{this.cart=e.data.data}).catch(e=>alert(e.res.data.message))},updateCartItem(e){const s={product_id:e.product.id,qty:e.qty};this.loadingItem=e.id,this.$http.put(`${i}/v2/api/${h}/cart/${e.id}`,{data:s}).then(n=>{alert(n.data.message),this.loadingItem="",this.getCarts()}).catch(n=>alert(n.res.data.message))},deleteItem(e){this.loadingItem=e.id,this.$http.delete(`${i}/v2/api/${h}/cart/${e.id}`).then(s=>{alert(s.data.message),this.loadingItem="",this.getCarts()}).catch(s=>alert(s.res.data.message))},onSubmit(){const e=this.form;this.$http.post(`${i}/v2/api/${h}/order`,{order:e}).then(s=>{this.getCarts(),alert(s.data.message),this.$refs.form.resetForm()}).catch(s=>console.log(s))}},mounted(){this.getCarts()}},x=I(" \u9019\u662F\u8CFC\u7269\u8ECA\u9801\u9762 "),C={class:"table align-middle"},$=t("thead",null,[t("tr",null,[t("th"),t("th",null,"\u54C1\u540D"),t("th",{style:{width:"150px"}},"\u6578\u91CF/\u55AE\u4F4D"),t("th",null,"\u55AE\u50F9")])],-1),y=["onClick","disabled"],P={class:"input-group input-group-sm"},V=["onUpdate:modelValue","onChange","disabled"],k=["value"],E={class:"text-end"},A=t("td",{colspan:"3",class:"text-end"},"\u7E3D\u8A08",-1),T={class:"text-end"},w=t("td",{colspan:"3",class:"text-end text-success"},"\u6298\u6263\u50F9",-1),D={class:"text-end text-success"};function U(e,s,n,q,d,_){return r(),c(u,null,[x,t("table",C,[$,t("tbody",null,[d.cart.carts?(r(!0),c(u,{key:0},p(d.cart.carts,a=>(r(),c("tr",{key:a.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:o=>_.deleteItem(a),disabled:a.id===d.loadingItem}," x ",8,y)]),t("td",null,l(a.product.title),1),t("td",null,[t("div",P,[b(t("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":o=>a.qty=o,onChange:o=>_.updateCartItem(a),disabled:a.id===d.loadingItem},[(r(),c(u,null,p(20,o=>t("option",{value:o,key:"0"+o},l(o),9,k)),64))],40,V),[[f,a.qty]])])]),t("td",E,l(a.total),1)]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[A,t("td",T,l(d.cart.total),1)]),t("tr",null,[w,t("td",D,l(d.cart.final_total),1)])])])],64)}const L=g(v,[["render",U]]);export{L as default};
